!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).NEUX={})}(this,(function(t){"use strict";class e{_list={};on(t,e){if(t&&e){const n=this._list,o=[].concat(t);for(const t of o)n[t]||(n[t]=new Map),n[t].set(e,!1)}}once(t,e){if(t&&e){const n=this._list,o=[].concat(t);for(const t of o)n[t]||(n[t]=new Map),n[t].set(e,!0)}}off(t,e){if(t){const n=this._list,o=[].concat(t);for(const t of o)n[t]&&(e?(n[t].delete(e),n[t].size||delete n[t]):(n[t].clear(),delete n[t]))}else this._list={}}emit(t,...e){const n=this._list;if("*"===t)for(const t in n)for(const[o,c]of n[t])o(...e),c&&this.off(t,o);else{const o=new Set([].concat(t));for(const t of o)if(n[t])for(const[o,c]of n[t])o(...e),c&&this.off(t,o)}}}function n(t){return void 0===t}function o(t){return"function"==typeof t}function c(t){return"string"==typeof t}function i(t){return Array.isArray(t)}function r(t){return"object"==typeof t&&null!==t&&(t.constructor===Object||t.constructor===Array)}function s(t,e){return r(t)&&Object.prototype.hasOwnProperty.call(t,e)}const f=Symbol("isProxy"),a=/^\$/,u={};function l(t,s=u){if(n(t))t={};else if(!r(t)||t[f])return t;const w=new e,g=new e,b=new e,v=new Proxy(t,{get:(t,e)=>e===f||("$"===e?function(t){return v["$"+t]}:"$$on"===e?function(...t){return w.on(...t)}:"$$once"===e?function(...t){return w.once(...t)}:"$$off"===e?function(...t){return w.off(...t)}:"$$emit"===e?function(...t){return w.emit(...t)}:"$$clone"===e?function(e=t){return $(e)}:"$$equal"===e?function(e,n=t){return y(e,n)}:"$$patch"===e?function(t,e=v){return m(s,t,e)}:"$$each"===e&&i(t)?function(e,n){return o(e)&&d(s,v,"#",e.bind(n)),t.map(e,n).filter((t=>t))}:(c(e)&&a.test(e)&&(e=e.slice(1),o(t[e])||d(s,v,e)),Reflect.get(t,e))),set:(t,e,n)=>{const f=$(t[e]),u=!(c(e)&&a.test(e));if(o(n)){n=p(s,v,e,n,g)}u&&r(n)&&(n=l(n,s),h(v,e,n,b));const d=!u||t[e]!==n||"length"===e&&i(t);if(!(!u||Reflect.set(t,e,n)))return!1;if(d){const o=[e,"*"];i(t)&&!isNaN(e)&&o.push("#");(async()=>{w.emit(o,n,f,e,v)})()}return!0},deleteProperty:(t,e)=>{const n=$(t[e]);if(!Reflect.deleteProperty(t,e))return!1;g.emit(e),b.emit(e);const o=[e,"*"];i(t)&&!isNaN(e)&&o.push("#");return(async()=>{w.emit(o,void 0,n,e,v)})(),!0}});for(const e in t){if(o(t[e])){const n=t[e],o=p(s,v,e,n,g);!(c(e)&&a.test(e))?t[e]=o:delete t[e]}if(r(t[e])){const n=l(t[e],s);t[e]=n,h(v,e,n,b)}}return v}function d(t,e,n,o){const c=t.value;if(!c)return;const i=c.get(e)||{};i[n]=o||null,c.set(e,i)}function p(t,e,o,c,i){return i.emit(o),function(t,e,n){if(t.value)throw Error("Collision in state binding");const o=t.value=new Map,c=e();delete t.value;for(const t of o){const[e,o]=t;for(const t in o)n(e,t,o[t])}return c}(t,(()=>c(e,o)),((t,r,s)=>{let f;f=s?(t,c,i,r)=>{isNaN(i)||(i=parseInt(i),n(c)||(c=s(c,i,r)),n(t)||(t=s(t,i,r)),e.$$emit(`#${o}`,t,c,i,r))}:()=>{const t=c(e,o);e[o]=t},t.$$on(r,f),i.once(o,(()=>t.$$off(r,f)))}))}function h(t,e,n,o){if(o.emit(e),!n[f])return;const c=(...n)=>{t.$$emit([e,"*"],...n,e)};n.$$on("*",c),o.once(e,(()=>n.$$off("*",c)))}function $(t){if(!r(t))return t;const e=i(t)?[]:{};for(const n in t)e[n]=$(t[n]);return e}function m(t,e,o){const c=i(o);for(const s in e)if(r(e[s]))if(r(o[s]))m(t,e[s],o[s]);else{const n=l(i(e[s])?[]:{},t);m(t,e[s],n),c?o.splice(parseInt(s),1,n):o[s]=n}else n(e[s])||(c?o.splice(parseInt(s),1,e[s]):o[s]=e[s]);if(c){const t=i(e)?e.length:0,n=o.length-t;n>0&&o.splice(t,n)}else for(const t in o)s(e,t)||delete o[t]}function y(t,e){if(r(t)&&r(e)){for(const n in e)if(!s(t,n))return!1;for(const n in t)if(!y(t[n],e[n]))return!1}else if(t!==e)return!1;return!0}function w(t,e,s){if(!r(t))return;const{document:f}=window;let a;if((t={...t}).view){if(a=t.view,delete t.view,o(a))return w(a(t),e,s);if(c(a)){const n=f.createElement("div");return n.innerHTML=a,t.view=n.firstChild,w(t,e,s)}}s||"SVG"!==`${t.tagName}`.toUpperCase()||(s="http://www.w3.org/2000/svg");const{tagName:u="DIV",namespaceURI:d=s,attributes:p,classList:h,on:$,children:m}=t;delete t.tagName,delete t.namespaceURI,delete t.attributes,delete t.classList,delete t.on,delete t.children,a||(a=d?f.createElementNS(d,u):f.createElement(u));const y=l({},e);a.addEventListener("removed",(()=>{y.$$off(),delete y["*"]}),!1);for(const t in $){const e=$[t];o(e)&&a.addEventListener(t,e)}for(const t in p){const e=p[t],n=e=>{a.setAttribute(t,e)};if(o(e)){const o=`$attributes.${t}`;y.$$on(o,n),y[o]=e}else n(e)}if(!n(h)){const t=t=>{i(t)&&(t=t.join(" ")),a.classList=t};if(o(h)){const e="$classList";y.$$on(e,t),y[e]=h}else t(h)}if(g(y,a,t),!n(m)){const t="$children",c=t=>{if(a.innerHTML="",!n(t)){const n=[].concat(t);for(const t of n){const n=w(t,e,d);n&&a.appendChild(n)}}},i=(t,o,c)=>{if(n(t)){const t=a.children[c];t&&a.removeChild(t)}else if(n(o)){const n=w(t,e,d);n&&a.appendChild(n)}else{const n=a.children[c],o=w(t,e,d);o&&n&&a.replaceChild(o,n)}};o(m)?(y.$$on(t,c),y.$$on("#"+t,i),y[t]=m):c(m)}return a}function g(t,e,c,...i){for(const s in c){const f=c[s],a=o=>{if(r(o)){const n=e[s];n&&g(t,n,o,...i,s)}else n(o)||(e[s]=o)};if(o(f)){const e="$"+[].concat(i,s).join(".");t.$$on(e,a),t[e]=f}else a(f)}}function b(t,e){const{location:n}=window;if(r(t)&&(e=t,t=null),!c(t)){const{path:e}=v(n.hash);t=e}n.hash=function(t,e){const n=[];for(const t in e)n.push(`${t}=${e[t]}`);let o=t?`#${t}`:"#";n.length&&(o+=`?${n.join("&")}`);return o}(t,e)}function v(t){const e={},n=/[?&]([^=]+)=([^&]*)/g;let o=n.exec(t);const{decodeURIComponent:c}=window;for(;o;){e[c(o[1])]=c(o[2]),o=n.exec(t)}return{path:c((/^#([^?]+)/.exec(t)||[])[1]||""),query:e}}t.createL10n=function(t,e){const{lang:n=navigator.language,fallback:o="en",context:i}=e||{};function s(e,n,i){if(c(n)&&(i=n,n=null),i||(i=f.$lang),i&&t[i]||(i=o),!i)return e;let s=`${e}`.split(".").reduce(((t,e)=>r(t)?t[e]:""),t[i]);for(const t in n){const e=new RegExp(`%{${t}}`,"g");s=s.replace(e,n[t])}return s}const f=l({lang:t[n]?n:o,locales:Object.keys(t),t:()=>s},i);return Object.seal(f),f},t.createRPC=function(t){const{url:e="/api/rpc",method:n="POST",headers:o={},mode:c,credentials:i}=t,s={};return Object.seal(s),new Proxy(s,{get:(t,s)=>async function(t){const f={};if(t instanceof File||t instanceof Blob){const e=new FormData;e.append("file",t),t=e}else r(t)?(f["Content-Type"]="application/json",t=JSON.stringify(t)):t=`${t}`;const a=await fetch(`${e}/${s}`,{method:n,mode:c,credentials:i,headers:Object.defineProperties(f,{...Object.getOwnPropertyDescriptors(o)}),body:t});if(!a.ok)throw Error(a.statusText);const u=a.headers.get("content-type")||"";return/^application\/json/.test(u)?await a.json():/^application\/octet-stream/.test(u)?await a.blob():await a.text()}})},t.createRouter=function(t,e){const{home:n,context:o}=e||{},{location:c,addEventListener:i}=window;function r(){if((!c.hash||"#"===c.hash)&&n)return c.hash=n;const{path:e,query:o}=v(c.hash);f.query||(f.query={});for(const t in f.query)s(o,t)||delete f.query[t];for(const t in o)f.query[t]!==o[t]&&(f.query[t]=o[t]);for(const n in t){const o=t[n],c=e.match(o);f.params[n]=c&&c[1]}f.path=e}const f=l({path:"",params:{},query:{},navigate:()=>b},o);return Object.seal(f),r(),f.$$on("*",(()=>{b(f.path,f.query)})),i("hashchange",(()=>r())),f},t.createState=l,t.createSync=function(t,e,n){const{slippage:o}=n||{};let c;const i=async(...n)=>{const o=c,i=t.$$clone();return c=await e(i,o,...n),r(c)&&t.$$patch(c),c};let s;return"number"==typeof o?async function(...t){return new Promise((e=>{clearTimeout(s),s=setTimeout((async()=>e(await i(...t))),s?o:0)}))}:i},t.createView=function(t,e){const{target:n,context:o}=e||{},c=w(t,o);if(c){const t=function(t){const{MutationObserver:e,CustomEvent:n,Node:o}=window,c=o.ELEMENT_NODE,i=new e((function(t){const e=(t,o)=>{const c=t.children;for(let t=0;t<c.length;t++)e(c[t],o);const i=new n(o);t.dispatchEvent(i)};for(const o of t)if("childList"===o.type)o.addedNodes.forEach((t=>{t.nodeType===c&&e(t,"mounted")})),o.removedNodes.forEach((t=>{t.nodeType===c&&e(t,"removed")}));else if("attributes"===o.type){const t=o.target,e=o.attributeName,c=o.oldValue,i=t.getAttribute(e);if(c!==i){const o=new n("changed",{detail:{attributeName:e,oldValue:c,newValue:i}});t.dispatchEvent(o)}}}));return i.observe(t,{childList:!0,subtree:!0,attributeOldValue:!0}),i}(n||c);c.addEventListener("removed",(e=>{e.target===c&&t.disconnect()}),!1),n&&n.appendChild(c)}return c}}));
