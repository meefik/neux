function t(t){return void 0===t}function e(t){return"function"==typeof t}function n(t){return"string"==typeof t}function o(t){return Array.isArray(t)}function s(t){return"object"==typeof t&&null!==t&&(t.constructor===Object||t.constructor===Array)}const c=Symbol("context"),i={};function r(t){return s(t)?t:i}function l(t,e,n,o){const s=t[c];if(s){const t=s.get(e)||{};t[n]=o||null,s.set(e,t)}}function a(t,e,n){const o=new Map,s=t[c];t[c]=o;const i=e();s?t[c]=s:delete t[c];for(const t of o){const[e,o]=t;for(const t in o)n(e,t,o[t])}return i}class f extends Map{constructor(t){super(),this._ctx=t}on(t,e){if(t&&e){const n=[].concat(t);for(const t of n)this.has(t)||this.set(t,new Map),this.get(t).set(e,!1)}}once(t,e){if(t&&e){const n=[].concat(t);for(const t of n)this.has(t)||this.set(t,new Map),this.get(t).set(e,!0)}}off(t,e){if(t){const n=[].concat(t);for(const t of n)this.has(t)&&(e?(this.get(t).delete(e),this.get(t).size||this.delete(t)):(this.get(t).clear(),this.delete(t)))}}emit(t,...e){if(t){const n=[].concat(t);for(const t of n)if(this.has(t))for(const[n,o]of this.get(t)){o&&this.off(t,n);try{n.apply(this._ctx,e)}catch(t){console.error(t)}}}}}const u=Symbol("signal");function d(t){let e=0;if(n(t))for(;t.startsWith("$");)t=t.slice(1),e++;return[e>0&&(t||(e>1?"*":"#")),t]}function h(t,e,n,o,s){return s.emit(n),a(t,o=o.bind(t,e,n),((t,c)=>{const i=()=>{e[n]=o()};t.$$on(c,i),s.once(n,(()=>t.$$off(c,i)))}))}function m(t,e,n,o){if(o.emit(e),n[u]){const s=(n,o,s,c,i=[])=>{t.$$emit("*",n,o,s,c,[...i,e])};n.$$on("*",s),o.once(e,(()=>n.$$off("*",s)))}}function p(n,o){const s=r(this),c=e(n)?n.bind(s):()=>n,i=o?o.bind(s):()=>{},l=[],f=a(s,c,((n,r,a)=>{const f="#"===r&&e(a)?a.bind(s):null,u=f?(e,n,s,c)=>{const i=+s,r=t(e)?e:f(e,i,c);o(r,i,c)}:()=>{const t=c();i(t)};n.$$on(r,u),l.push((()=>n.$$off(r,u)))}));i(f);return()=>{for(const t of l)t()}}function g(t={}){if(!s(t)||t[u])return t;const n=r(this),c=new f(n),i=new f,a=new f,p={$$on:(t,e)=>c.on(t,e),$$once:(t,e)=>c.once(t,e),$$off:(t,e)=>c.off(t,e),$$emit:(t,...e)=>c.emit(t,...e)},w=new Proxy(t,{get:(t,e)=>{if(e===u)return!0;if(e in p)return p[e];const[s,c]=d(e);if(s){if("map"===c&&o(t))return(t,e=n)=>(l(n,w,"#",t.bind(e)),w.map(t,e));if(l(n,w,s),!c)return w}return Reflect.get(t,c)},set:(t,r,l)=>{const[f]=d(r);if(f)return!1;const u=t[r];if(e(l)){l=h(n,w,r,l,a)}s(l)&&(l=g.call(n,l),m(w,r,l,i));const p="length"===r&&o(t),y=t[r]!==l||p;return!!Reflect.set(t,r,l)&&(y&&c.emit(p?r:[r,"#","*"],l,u,r,w),!0)},deleteProperty:(t,e)=>{const[n]=d(e);if(n)return!1;const o=t[e];return!!Reflect.deleteProperty(t,e)&&(i.emit(e),a.emit(e),c.emit([e,"#","*"],void 0,o,e,w),!0)}});for(let o in t){const[c]=d(o);if(!c){if(e(t[o])){const e=t[o];t[o]=h(n,w,o,e,a)}if(s(t[o])){const e=g.call(n,t[o]);t[o]=e,m(w,o,e,i)}}}return w}function w(c,i){const{document:l,Node:a,CustomEvent:f}=window,u=r(this);if(e(c)&&(c=c.call(u)),n(c))return l.createTextNode(c);if(!s(c))return c;if(o(c)){const t=l.createDocumentFragment();for(const e of c){const n=w.call(u,e,i);n instanceof a&&t.appendChild(n)}return t}const{tag:d,tagName:h="div",namespaceURI:m=i,shadowRootMode:g,adoptedStyleSheets:y,classList:v,attributes:$,style:b,dataset:E,on:L,children:N,ref:S,...M}=c,C=s(d)||e(d)?w.call(u,d,m):function(t,e){const{document:o,customElements:s,Element:c}=window,i=[];let r,l,a="div";if(n(t))if(/[^a-zA-Z0-9-_.#]/u.test(t)){const e=o.createElement("div");e.innerHTML=t,e.firstChild instanceof c&&(r=e.firstChild,a=r.tagName)}else{const e=t.match(/([.#]?[^\s#.]+)/gu)||[];for(const t of e){const e=t[0];"."===e?i.push(t.slice(1)):"#"===e?l=t.slice(1):a=t}}else t instanceof c&&(r=t,a=r.tagName);if(!r){const t=s?.get(a);if(t)r=new t;else{if("http://www.w3.org/1999/xhtml"===e&&(e=null),!e)switch(`${a}`.toLowerCase()){case"svg":e="http://www.w3.org/2000/svg";break;case"math":e="http://www.w3.org/1998/Math/MathML"}r=e?o.createElementNS(e,a):o.createElement(a)}}return l&&(r.id=l),i.length&&(r.className=i.join(" ")),r}(d||h,m);let A;i=C.namespaceURI,g&&(A=C.attachShadow({mode:g}),A&&y&&(A.adoptedStyleSheets=y));const x=[],P=(t,n)=>{if(e(t)){const e=p.call(u,t,n);x.push(e)}else n(t)};if(!t(L))for(const t in L){const n=L[t];e(n)&&C.addEventListener(t,(t=>n.call(u,t)))}const R=({children:t},e)=>{for(const n of t){const t=new f(e,{cancelable:!0});n.dispatchEvent(t)}};C.addEventListener("mounted",(t=>{t.defaultPrevented||R(C,"mounted")})),C.addEventListener("removed",(t=>{if(!t.defaultPrevented){R(C,"removed");for(const t of x)t()}})),t(v)||P(v,(t=>{Array.isArray(t)?C.classList=t.filter(Boolean).join(" "):n(t)&&(C.classList=t)})),t($)||P($,(e=>{for(const n in e)P(e[n],(e=>{t(e)?C.removeAttribute(n):C.setAttribute(n,e)}))})),t(b)||P(b,(e=>{for(const n in e)P(e[n],(e=>{/[A-Z]/u.test(n)?t(e)?delete C.style[n]:C.style[n]=e:t(e)?C.style.removeProperty(n):C.style.setProperty(n,e)}))})),t(E)||P(E,(e=>{for(const n in e)P(e[n],(e=>{t(e)?delete C.dataset[n]:C.dataset[n]=e}))}));for(const e in M)P(M[e],(n=>{t(n)?delete C[e]:C[e]=n}));if(!t(N)){const e=A||C;P(N,((n,o,s)=>{if(s)if(t(n)){const t=e.children[o];t&&e.removeChild(t)}else if(e.children[o]){const t=e.children[o];if(t){const o=w.call(u,n,i);o&&e.replaceChild(o,t)}}else{const t=w.call(u,n,i);t&&e.appendChild(t)}else{e.innerHTML="";const t=w.call(u,n,i);t instanceof a&&e.appendChild(t)}}))}return e(S)&&S.call(u,C),C}function y(t,e,n){return o(t)?w.call(this,t):(s(t)&&(n=e,e=t,t=null),s(e)&&!o(e)||(n=e,e={}),w.call(this,{tag:t,children:n,...e}))}function v(t,e){const{MutationObserver:o,CustomEvent:s,Element:c,document:i}=window,{ELEMENT_NODE:r}=c,l=(t,e)=>{if(t.nodeType!==r)return;const n=new s(e,{cancelable:!0});t.dispatchEvent(n)};n(e)&&(e=i.querySelector(e));const a=new o((e=>{for(const n of e)if("childList"===n.type)n.addedNodes.forEach((t=>{t.parentNode&&l(t,"mounted")})),n.removedNodes.forEach((e=>{e.parentNode||l(e,"removed"),e===t&&a.disconnect()}));else if("attributes"===n.type){const t=n.target,{attributeName:e}=n,{oldValue:o}=n,c=t.getAttribute(e);if(o!==c){const n=new s("changed",{detail:{attributeName:e,oldValue:o,newValue:c}});t.dispatchEvent(n)}}}));a.observe(e,{childList:!0,subtree:!0,attributeOldValue:!0}),e.appendChild(t)}function $(c,i){const{language:r=navigator.language,fallback:l="en"}=i||{},a=(t,e)=>{const n=c[e]||{};return t in n?n[t]:t.split(".").reduce(((t,e)=>s(t)?t[e]:""),n)};return(s,i,f=r)=>{if(n(i)&&(f=i,i=null),f&&c[f]||(f=l),n(s)){let c=a(s,f);return f!==l&&t(c)&&(c=a(s,l)),((t,s,c)=>{if(n(t))for(const n in s){const i=new RegExp(`%\\{${n}\\}`,"gu");let r=s[n];if(o(r)){const[t,n]=r;r=e(t?.toLocaleString)?t.toLocaleString(c,n):t}t=t.replace(i,r)}return t})(t(c)?s:c,i,f)}return e(s?.toLocaleString)?s.toLocaleString(f,i):s}}export{p as effect,$ as l10n,v as mount,y as render,g as signal};
