function e(e){return void 0===e}function t(e){return"function"==typeof e}function n(e){return"string"==typeof e}function o(e){return Array.isArray(e)}function s(e){return"object"==typeof e&&null!==e&&(e.constructor===Object||e.constructor===Array)}class i{#e={};on(e,t){if(e&&t){const n=this.#e,o=[].concat(e);for(const e of o)n[e]||(n[e]=new Map),n[e].set(t,!1)}}once(e,t){if(e&&t){const n=this.#e,o=[].concat(e);for(const e of o)n[e]||(n[e]=new Map),n[e].set(t,!0)}}off(e,t){if(e){const n=this.#e,o=[].concat(e);for(const e of o)n[e]&&(t?(n[e].delete(t),n[e].size||delete n[e]):(n[e].clear(),delete n[e]))}else this.#e={}}emit(e,...t){const n=this.#e;if("*"===e)for(const e in n)for(const[o,s]of n[e])o(...t),s&&this.off(e,o);else{const o=new Set([].concat(e));for(const e of o)if(n[e])for(const[o,s]of n[e])o(...t),s&&this.off(e,o)}}}const c=Symbol("isProxy"),r=/^\$/u,a={};function l(e,t,n,o){const s=e.value;if(s){const e=s.get(t)||{};e[n]=o||null,s.set(t,e)}}function f(t,n,o,s,i){return i.emit(o),function(e,t,n){if(e.value)throw Error("Collision in state binding");const o=new Map;e.value=o;const s=t();delete e.value;for(const e of o){const[t,o]=e;for(const e in o)n(t,e,o[e])}return s}(t,(()=>s(n,o)),((t,c,r)=>{const a=r?(t,s,i,c)=>{const a=n[o],l=parseInt(i,10);if(e(t))a.splice(l,1);else if(e(s)){const e=r(t,l,c);a[l]=e}else{const e=r(t,l,c);a.splice(l,1,e)}}:()=>{const e=s(n,o);n[o]=e};t.$$on(c,a),i.once(o,(()=>t.$$off(c,a)))}))}function u(e,t,n,o){if(o.emit(t),n[c]){const s=(n,o,s,i,c=[])=>{e.$$emit([t,"*"],n,o,s,i,[...c,t])};n.$$on("*",s),o.once(t,(()=>n.$$off("*",s)))}}function d(e){if(!s(e))return e;const t=o(e)?[]:{};for(const n in e)t[n]=d(e[n]);return t}function p(t,n,i){const c=o(n);for(const r in t)if(s(t[r]))if(s(n[r]))p(t[r],n[r],i);else{const e=h(o(t[r])?[]:{},i);p(t[r],e,i),c?n.splice(parseInt(r,10),1,e):n[r]=e}else e(t[r])||(c?n.splice(parseInt(r,10),1,t[r]):n[r]=t[r]);if(c){const e=o(t)?t.length:0,s=n.length-e;s>0&&n.splice(e,s)}else for(const o in n)t&&!e(t[o])||delete n[o]}function $(t,n){if(s(t)&&s(n)){for(const o in n)if(e(t[o]))return!1;for(const e in t)if(!$(t[e],n[e]))return!1}else if(t!==n)return!1;return!0}function h(m,g){if(e(m))m={};else if(!s(m)||m[c])return m;const{context:y=a}=g||{},w=new i,v=new i,b=new i,T=new Proxy(m,{get:(e,s)=>s===c||("$"===s?function(e){return T[`$${e}`]}:"$$on"===s?function(...e){return w.on(...e)}:"$$once"===s?function(...e){return w.once(...e)}:"$$off"===s?function(...e){return w.off(...e)}:"$$emit"===s?function(...e){return w.emit(...e)}:"$$clone"===s?function(t=e){return d(t)}:"$$equal"===s?function(t,n=e){return $(t,n)}:"$$patch"===s?function(e,t=T){return p(e,t,g)}:"$$each"===s&&o(e)?function(n,o){return t(n)&&l(y,T,"#",n.bind(o)),e.map(n,o).filter((e=>e))}:(n(s)&&r.test(s)&&(s=s.slice(1),t(e[s])||l(y,T,s)),Reflect.get(e,s))),set:(e,n,i)=>{const c=d(e[n]);if(t(i)){i=f(y,T,n,i,v)}s(i)&&(i=h(i,g),u(T,n,i,b));const r=e[n]!==i||"length"===n&&o(e);if(!Reflect.set(e,n,i))return!1;if(r){const t=[n];o(e)&&isNaN(n)||t.push("*"),o(e)&&!isNaN(n)&&t.push("#"),w.emit(t,i,c,n,T)}return!0},deleteProperty:(e,t)=>{const n=d(e[t]);if(!Reflect.deleteProperty(e,t))return!1;v.emit(t),b.emit(t);const s=[t];return o(e)&&isNaN(t)||s.push("*"),o(e)&&!isNaN(t)&&s.push("#"),w.emit(s,void 0,n,t,T),!0}});for(const e in m){if(t(m[e])){const t=m[e],n=f(y,T,e,t,v);m[e]=n}if(s(m[e])){const t=h(m[e],g);m[e]=t,u(T,e,t,b)}}return T}function m(e,t){s(e)||(e={}),t||"SVG"!==`${e.tagName}`.toUpperCase()||(t="http://www.w3.org/2000/svg");const{tagName:o="div",namespaceURI:i=t,node:c}=e,{document:r,Element:a}=window;let l=c instanceof a?c:i?r.createElementNS(i,o):r.createElement(o);n(c)&&(l.innerHTML=c,l.firstChild instanceof a&&(l=l.firstChild));const f={configurable:!1,enumerable:!0,writable:!1};Object.defineProperties(e,{tagName:{value:l.tagName,...f},namespaceURI:{value:l.namespaceURI,...f},node:{value:l,...f}});for(const t in e){g(l,e[t],void 0,t)}return l}function g(n,i,c,r,a,l=[]){const{Element:f}=window,[u]=l;let d=0;for(let e=l.length-1,t=n;e>=0;e--){if(t=t[l[e]],!t)break;t instanceof f?(n=t,d=0):d++}if(0===d)if("on"===r){for(const e in i){const o=i[e];t(o)&&n.addEventListener(e,o)}for(const o in c)if(!i||e(i[o])){const e=c[o];t(e)&&n.removeEventListener(o,e)}}else if("attributes"===r){for(const t in i){const o=i[t];e(o)||n.setAttribute(t,o)}for(const t in c)i&&!e(i[t])||n.removeAttribute(t)}else if("style"===r){const{style:t}=n;for(const e in i)t[e]=i[e];for(const n in c)i&&!e(i[n])||t.removeProperty(n)}else if("classList"===r)n.classList=o(i)?i.join(" "):i||"";else if("children"===r){if(n.innerHTML="",o(i))for(const e of i){const t=m(e,n.namespaceURI);t&&n.appendChild(t)}}else if(s(i)){if(n[r]){for(const t in i){const o=i[t];e(o)||(n[r][t]=o)}for(const t in c)e(i[t])&&delete n[r][t]}}else e(i)?delete n[r]:function(e){return["tagName","namespaceURI","node"].includes(e)}(r)||(n[r]=i);else if(1===d)if("on"===u)e(i)?t(c)&&n.removeEventListener(r,c):t(i)&&n.addEventListener(r,i);else if("attributes"===u)e(i)?n.removeAttribute(r):n.setAttribute(r,i);else if("style"===u){const{style:t}=n;e(i)?t.removeProperty(r):t[r]=i}else if("classList"===u)n.classList=o(a)?a.join(" "):a||"";else if("children"===u)if(e(i)){const e=n.children[r];e&&n.removeChild(e)}else if(e(c)){const e=m(i,n.namespaceURI);e&&n.appendChild(e)}else{const e=n.children[r],t=m(i,n.namespaceURI);t&&e&&n.replaceChild(t,e)}else n[u]&&(e(i)?delete n[u][r]:n[u][r]=i)}function y(e,t){const{target:n,context:o}=t||{},s=h(e,{context:o}),i=m(s);s.$$on("*",((...e)=>{g(i,...e)}));const c=function(e){const{MutationObserver:t,CustomEvent:n,Element:o}=window,{ELEMENT_NODE:s}=o,i=new t((e=>{const t=(e,o)=>{const{children:s}=e;for(let e=0;e<s.length;e++)t(s[e],o);const i=new n(o);e.dispatchEvent(i)};for(const o of e)if("childList"===o.type)o.addedNodes.forEach((e=>{e.nodeType===s&&t(e,"mounted")})),o.removedNodes.forEach((e=>{e.nodeType===s&&t(e,"removed")}));else if("attributes"===o.type){const e=o.target,{attributeName:t}=o,{oldValue:s}=o,i=e.getAttribute(t);if(s!==i){const o=new n("changed",{detail:{attributeName:t,oldValue:s,newValue:i}});e.dispatchEvent(o)}}}));return i.observe(e,{childList:!0,subtree:!0,attributeOldValue:!0}),i}(n||i);return i.addEventListener("removed",(e=>{e.target===i&&c.disconnect()}),!1),n&&n.appendChild(i),s}function w(e,t){const n=-1*new Date(e).getTimezoneOffset();return`${n>=0?"+":""}${t?""+~~(n/60):("0"+~~(n/60)).slice(-2)}:${("0"+~~(n%60)).slice(-2)}`}function v(e,t){const{lang:o=navigator.language,fallback:i="en",prefix:c,context:r}=t||{},a=(t,o,c)=>{if(n(o)&&(c=o,o=null),c||(c=f.$lang),c&&e[c]||(c=i),!c)return t;let r=`${t}`.split(".").reduce(((e,t)=>s(e)?e[t]:""),e[c]);for(const e in o){const t=new RegExp(`%\\{${e}\\}`,"gu");r=r.replace(t,o[e])}return r},l=(e,t,n)=>{const o=c?`${c}.`:"";e=new Date(e);const s=()=>n?e.getUTCFullYear():e.getFullYear(),i=()=>n?e.getUTCMonth():e.getMonth(),r=()=>n?e.getUTCDate():e.getDate(),l=()=>n?e.getUTCDay():e.getDay(),f=()=>n?e.getUTCHours():e.getHours(),u=()=>n?e.getUTCMinutes():e.getMinutes(),d=()=>n?e.getUTCSeconds():e.getSeconds(),p=()=>{const e=n?Date.UTC(s(),0,0):new Date(s(),0,0).getTime(),t=n?Date.UTC(s(),i(),r()):new Date(s(),i(),r()).getTime();return Math.round((t-e)/864e5)},$={YYYY:()=>`000${s()}`.slice(-4),YY:()=>`0${s()}`.slice(-2),Q:()=>`${Math.ceil((i()+1)/3)}`,MMMM:()=>a(`${o}month.full.${i()}`),MMM:()=>a(`${o}month.short.${i()}`),MM:()=>`0${i()+1}`.slice(-2),M:()=>`${i()+1}`,DD:()=>`0${r()}`.slice(-2),D:()=>`${r()}`,DDDD:()=>`00${p()}`.slice(-3),DDD:()=>`${p()}`,dddd:()=>a(`${o}day.full.${l()}`),ddd:()=>a(`${o}day.short.${l()}`),HH:()=>`0${f()}`.slice(-2),H:()=>`${f()}`,hh:()=>`0${f()>12?f()-12:f()||12}`.slice(-2),h:()=>`${f()>12?f()-12:f()||12}`,kk:()=>`0${f()+1}`.slice(-2),k:()=>`${f()+1}`,mm:()=>`0${u()}`.slice(-2),m:()=>`${u()}`,ss:()=>`0${d()}`.slice(-2),s:()=>`${d()}`,X:()=>""+e.getTime()/1e3,x:()=>`${e.getTime()}`,a:()=>a(f()<12?`${o}time.am.0`:`${o}time.pm.0`),A:()=>f()<12?a(`${o}time.am.1`):a(`${o}time.pm.1`),ZZ:()=>n?"+00:00":w(e),Z:()=>n?"+0:00":w(e,!0)};for(const e in $){const n=new RegExp(`\\{${e}\\}`,"gu");t=t.replace(n,$[e])}return t},f=h({lang:e[o]?o:i,locales:Object.keys(e),t:()=>a,d:()=>l,translate:()=>a,dateToLocaleString:()=>l},{context:r});return Object.seal(f),f}function b(e){const t={},n=/[?&](?<key>[^=]+)=(?<val>[^&]*)/gu;let o=n.exec(e);const{decodeURIComponent:s}=window;for(;o;){t[s(o.groups.key)]=s(o.groups.val),o=n.exec(e)}const i=/^#(?<path>[^?]+)/u.exec(e);return{path:s(i?.groups.path||""),query:t}}function T(e,t){const{location:o}=window;if(s(e)&&(t=e,e=null),!n(e)){const{path:t}=b(o.hash);e=t}o.hash=function(e,t){const n=[];for(const e in t)n.push(`${e}=${t[e]}`);let o=e?`#${e}`:"#";return n.length&&(o+=`?${n.join("&")}`),o}(e,t)}function D(t,n){const{home:o,context:s}=n||{},{location:i,addEventListener:c}=window,r=h({path:"",params:{},query:{},navigate:()=>T},{context:s});Object.seal(r);const a=()=>{if(i.hash&&"#"!==i.hash||!o){const{path:n,query:o}=b(i.hash);r.query||(r.query={});for(const t in r.query)e(o)&&delete r.query[t];for(const e in o)r.query[e]!==o[e]&&(r.query[e]=o[e]);for(const e in t){const o=t[e],s=n.match(o);r.params[e]=s&&s[1]}r.path=n}else i.hash=o};return a(),r.$$on("*",(()=>{T(r.path,r.query)})),c("hashchange",(()=>a())),r}function E(e){const{url:t="/api/rpc",method:n="POST",headers:i={},mode:c,credentials:r}=e,a={};Object.seal(a);return new Proxy(a,{get:(e,a)=>async function(e){const l={};if(e instanceof FormData);else if(e instanceof File||e instanceof Blob){const t=new FormData;t.append("file",e),e=t}else s(e)||o(e)?(l["Content-Type"]="application/json",e=JSON.stringify(e)):e=`${e}`;const f=await fetch(`${t}/${a}`,{method:n,mode:c,credentials:r,headers:Object.defineProperties(l,{...Object.getOwnPropertyDescriptors(i)}),body:e});if(!f.ok)throw Error(f.statusText);const u=f.headers.get("content-type")||"";return/^application\/json/u.test(u)?await f.json():/^application\/octet-stream/u.test(u)?await f.blob():await f.text()}})}function M(e,t,n){const{slippage:o}=n||{};let i=null;const c=async(...n)=>{const o=i,c=e.$$clone(),r=await t(c,o,...n);return s(r)&&e.$$patch(r),i=r};let r=null;return"number"==typeof o?(...e)=>new Promise((t=>{clearTimeout(r),r=setTimeout((async()=>t(await c(...e))),r?o:0)})):c}export{v as createL10n,E as createRPC,D as createRouter,h as createState,M as createSync,y as createView};
